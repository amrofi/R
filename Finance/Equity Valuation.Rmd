---
title: "Equity Valuation"
author: "Daniel Pinedo (from DataCamp course by Clifford Ang)"
date: "3/15/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Basics

After-Tax Income
[1] Revenues                         # Sales
[2] Less: Cost of Goods Sold
====================================
[3] Gross Profit
[4] Less: Operating Expenses
====================================
[5] Operating Income or EBIT         # Earnings Before Interest & Taxes
[6] Less: Interest Expense           # Compensation to debt holders
====================================
[7] Pre-Tax Income                   
[8] Less: Taxes                      # Payment to the government
====================================
[9] After-Tax Income                 # Net Income

FCFF model forecasts free cash flows for equity and debt and uses WACC
FCFE model forecasts free cash flows for equity accounting for debt and uses Cost of Capital

#Time Value of Money
```{r}
# Present Value
     # Calculate Present Value of $100 "n" year(s) from now given 5% interest rate of return
n = 1
r = .05

pv <- 100/(1 + r)^n
round(pv, 2)

```

FCFE model

"Free Cash Flows" are cash flows after you have paid out
     All your suppliers, employees, lenders, and government (taxes) and
     Setting aside money for capital investments and additional working capital needs and
     Net of new borrowings and debt repayments
     No effect on firm's projected operations
     No effect on firm's projected growth
     
Adjustments to Arrive to FCFE
[9] After-Tax Income
[10] Add: Depreciation and Amortization  # Non-cash charge. Cash spent at time of purchase
[11] Less: Capital Expenditures          # Cash spent on capital investments
[12] Less: Increases in Working Capital  # Cash spent on additional working capital needs
====================================
[13] Free Cash Flow to Equity

#Terminal Value
using perpetuity with growth model (PGM)
```{r}
#TV = {FCFE +1 year after growth period * (1 + Perpetuity Growth Rate[g])} / (Cost of Equity[k] - g)
#or
#TV = FCFE at end of growth period / (Cost of Equity[k] - g)

```

#Equity Value
Summation of Present Value of the FCFE during the projection period + Present Value of the Terminal Value
```{r}
# Example: Suppose the FCFE for each of the first five years is $100 million. Assuming a cost of equity of 15%, the present value of each cash flow is:

#PV of FCFE
k_e <- 0.15 #cost of equity

     #create data frame with 5 years of cash flows at $100 million
cf <- rep(100, 5)
cf <- data.frame(cf)

     #create columns for period of 1 to 5, PV factor multiplied by cash flow 
cf$period <- seq(1, 5, 1)
cf$pv_factor <- 1 / (1 + k_e)^cf$period
cf$pv <- cf$cf * cf$pv_factor
cf

pv_fcfe <- sum(cf$pv) #summation of pv column
pv_fcfe

#PV of terminal value
tv_yr5 <- 858.333

pv_tv <- tv_yr5 / (1 + k_e)^5
pv_tv

equity_value <- pv_fcfe + pv_tv
equity_value

```








     


 
