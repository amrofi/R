---
title: "Equity Valuation - Projections and Growth"
author: "Daniel Pinedo (from DataCamp course by Clifford Ang)"
date: "3/23/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Visualizing historical versus projected data - Example
```{r}

# Create two vectors: one for historical (hist) revenues
# and another for projected (proj) revenues
hist <- c(28.4, 32.2, 36.8, 39.8, 44.3, 51.1, 60.4, 
            58.4, 62.5, 69.9, rep(0, 5))
proj <- c(rep(0,10), 73.7, 77.8, 86.8, 93.6, 85.3)

# combine both vectors into a dataframe
rev_all <- rbind(hist, proj)
class(rev_all)
typeof(rev_all)
dim(rev_all)

#name columns
colnames(rev_all) <- seq(2008, 2022, 1)
rev_all

# Create bar plot of revenues data
barplot(rev_all,
   col = c("red", "blue"),
   main = "Historical vs. Projected Revenues")
legend("topleft",
   legend = c("Historical", "Projected"),
   fill = c("red", "blue"))

```

Trend Analysis - Example
```{r}

# Create one vector of historical and projected revenues
rev <- data.frame(c(28.4, 32.2, 36.8, 39.8, 44.3, 51.1, 60.4, 
                      58.4, 62.5, 69.9, 73.7, 77.8, 86.8, 93.6, 85.3))
rownames(rev) <- seq(2008, 2022, 1)
names(rev) <- "rev"
# Add trend and shift variables
rev$trend <- seq(1, 15, 1) #number of years, starting at 1
rev$shift <- c(rep(0, 10), rep(1, 5)) #Dummy code for historical (0) versus projected (1) revenues

# Model of trend + shift predicting revenue
reg <- lm(rev ~ trend + shift, data = rev)
summary(reg) #trend predicts change in revenue, but historical vs. predicted does not. Therefore the growth rate is constant.

```

If trend analysis passes visual inspection and regression model test like above, then we may calculate growth rate.

The mathematical assumption here is that growth is never in a negative direction for the time period

Fundamental Growth Rate (or expected growth in net income)
```{r}
# FGR = Retention Ratio * ROE or, 
# Retained Earnings/Net Income * (Net Income/Book Value of Equity)
```

Perpetuity Growth Rate (or expected growth in operating income)
```{r}
# The PGR is bounded by the following relationship:
# PGR = Reinvestment Rate * Return on Equity
# Reinvestment Rate = (CapEx + Incr. in WC - D&A) / After-Tax Income
# Return on Equity equals the Cost of Equity in steady-state
```

Similarly,

Efficiency Growth Rate may be a good measure for firms with low ROE that is improving or projected to improve over a finite period of time. Efficiency growth is not good for calculating perpetual growth rates.

Revenue Growth Rate versus Operating Margins is another growth rate that can be used using Sales/Equity ratio as a multiplier (one dollar of investment will net X in Revenue). This ratio tends to be used for young growth firms over a finite period of time.

references: http://pages.stern.nyu.edu/~adamodar/New_Home_Page/valquestions/growth.htm
            https://www.youtube.com/watch?v=83yR6EFEl5Y&list=PLUkh9m2BorqnKWu0g5ZUps_CbQ-JGtbI9&index=9
